--- #sample recipe
# TODO: @FEATURE add unicode support in the YAML. (120)
# See http://stackoverflow.com/questions/21129020/how-to-fix-unicodedecodeerror-ascii-codec-cant-decode-byte
variables:
  varbool: true
  varint: 7
  varfloat: 0.786
  varstring: Brad's favourite colour

recipe:
  -  # step0
    name: Create Kong API
    httpmethod: POST
    URL: http://kong:8001/apis
    request:
      body:
        name: Consumer API
        upstream_uri: http://wiremock/blah
        strip_url: false
      headers:
        Authorisation: yadda-step one authorisation header brad
        Content-type: application/json
      querystring:
        keya: vala
        keyb: valb
    response: # set up this response section if you need to pull out data here for use later in the recipe.
      body:
        id: this_is_a_param
      headers:
        Authorisation:
      code:
  -  # step 1
    name: Load OAUTH Plugin
    httpmethod: POST
    URL: http://kong:8001/apdis/<%=steps[0].response.body["id"]%>/<%=steps[0].request.querystring["keya"]%> #gets the JSON field id from the body of the response from step 1.
    request:
      querystring:
        key3: value3
        keysub: <%=steps[0].request.headers["Authorisation"]%>
      body:
        key4: valueprefix <%=steps[0].request.headers["Content-type"]%>
      headers:
        blah: blahbha
        Authorisation: bearer <%=steps[0].request.body["upstream_uri"]%>
    response: # set up this response section if you need to pull out data here for use later in the recipe.
      code:
      body:
      headers:
        Authorisation:
  -  # step 2
    name: Test types
    httpmethod: POST
    URL: ddodgy URL ## TODO: @TEST (5)try a load of different types, different schemas, etc, etc, etc.
    request:
      querystring:
        qsbool0: true
        qsbool1: True
        qsbool2: "true"
        qsbool3: 1
        qsint: 2016
        qsstring: this is a string with some unicode
        qsfloat: 3.14157
      headers:
        headerbool0: true
        headerbool1: True
        headerbool2: "true"
        headerbool3: 1
        headerint: 2016
        headerstring: this is a string with some unicode
        headerfloat: 3.14157
        CAPHeader: brad  # TODO: @TEST (15) check for case-insensitive as per https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2
      body:
        bodybool0: true
        bodybool1: True
        bodybool2: "true"
        bodybool3: 1
        bodyint: 2016
        bodystring: this is a string with some unicode
        bodyfloat: 3.14157
        CAPBody: brad  # check for case-sensitive field name -- JSON
  -  # step 3
    URL: http://mockbin.org/ ## TODO: @TEST (5)try a load of different types, different schemas, etc, etc, etc.

